<form class="{{cssClass}} item-sheet flexcol">
    <header class="sheet-header">
        <img class="profile-img" src="{{item.img}}" data-edit="img" title="{{name}}"/>
        <div class="flexcol">
            <label>Name:</label>
            <input type="text" class="weapon-mod" value="{{_source.name}}" data-target="name">
        </div>
    </header>
    {{#if isGM}}
    <label class="button clone">Copy Item</label>
    {{/if}}
    <div class="grid grid-3col">

        <div class="flexcol">
            <label>Discipline:</label>
            <select class="discipline" name="system.discipline.value">
                {{selectOptions FORTYK.psychicDisciplines selected=system.discipline.value valueAttr="value" labelAttr="value"}}

            </select>
        </div>
        <div class="flexcol">
            <label>Cost:</label>
            <input type="text" class="weapon-mod" value="{{system.cost.value}}" data-target="system.cost.value">
        </div>
        <div class="flexcol">
            <label>Requirements:</label>
            <input type="text" class="weapon-mod" value="{{system.reqs.value}}" data-target="system.reqs.value">
        </div>
        <div class="flexcol">
            <label>Power Type:</label>

            <select class="power-type" name="system.class.value">
                {{selectOptions FORTYK.psychicPowerTypes selected=system.class.value valueAttr="value" labelAttr="value"}}

            </select>
        </div>
        <div class="flexcol">
            <label>Action:</label>
            <input type="text" class="weapon-mod" value="{{system.action.value}}" data-target="system.action.value">
        </div>
        <div class="flexcol">
            <label>Targets:</label>

            <select class="power-type" name="system.affects.value">
                {{selectOptions FORTYK.psychicPowerTargets selected=system.affects.value valueAttr="value" labelAttr="label"}}

            </select>
        </div>


        <div class="flexcol">
            <label>Test Type:</label>

            <select class="power-char" name="system.testChar.value">
                {{selectOptions FORTYK.psyChars selected=system.testChar.value valueAttr="value" labelAttr="label"}}

            </select>
        </div>
        <div class="flexcol">
            <label>Modifier:</label>
            <input type="text" class="weapon-mod" value="{{system.testMod.value}}" data-target="system.testMod.value" data-dtype="Number">
        </div>



        <div class="flexcol">
            <label>Range:</label>
            <input type="text" class="weapon-mod" value="{{system.range.formula}}" data-target="system.range.formula">
        </div>
        <div class="flexcol">
            <label>Sustain:</label>
            <input type="text" class="weapon-mod" value="{{system.sustain.value}}" data-target="system.sustain.value">
        </div>
        <div class="flexcol">
            <label>Subtype:</label>
            <input type="text" class="weapon-mod" value="{{system.subtype.value}}" data-target="system.subtype.value">
        </div>
        {{#if  (contains system.discipline.value "navigator")}}
        <div class="flexcol">
            Training:
            <select class="power-training"  name="system.training.value">
                {{selectOptions FORTYK.navigatorPowerTraining selected=system.training.value valueAttr="value" labelAttr="value"}}
            </select>
        </div>
        <div class="flexcol">
            Navigator Power Flag:
            <div class="flexrow">
                <input type="text" id="navpowerflaginput" value="{{flags.fortyk.navpowerflag}}">
                <a class="any-skill-icon navflagconfirm"></a>
            </div>

        </div>
        {{/if}}
        {{#if attack}}
        <div class="flexcol">
            <label>Damage:</label>
            <input type="text" class="weapon-mod" value="{{system.damageFormula.formula}}" data-target="system.damageFormula.formula">
        </div>
        <div class="flexcol">
            <label>Penetration:</label>
            <input type="text" class="weapon-mod" value="{{system.pen.formula}}" data-target="system.pen.formula" data-dtype="String">
        </div>
        <div class="flexcol">

            <a class="special button">Special</a>


        </div>
        <div class="flexcol">
            <label>Damage Type:</label>
            <select class="damage-type" name="system.damageType.value">
                {{selectOptions FORTYK.damageTypes selected=system.damageType.value valueAttr="value" labelAttr="value"}}

            </select>
        </div>
        {{else if (contains system.class.value "Buff/Debuff")}}
        {{#if isGM}}
        <div class="flexcol">
            <a class="modifier button">Buff/Debuff</a>
        </div>
        {{/if}}
        {{else if (contains system.class.value "Aura")}}
        {{#if isGM}}
        <div class="flexrow">
            <label>Doesn't affect self:</label>
            <input type="checkbox" class="aura-self" name="system.notSelf" {{checked system.notSelf}}>
        </div>
        <div class="flexcol">
            <a class="modifier button">Aura Efffects</a>
        </div>
        <div class="flexcol">
            <label>Aura Type:</label>

            <select class="power-char" name="system.auraType">
                {{selectOptions FORTYK.auraTypes selected=system.auraType valueAttr="value" labelAttr="label"}}

            </select>
        </div>
        {{/if}}
        {{else if (contains system.class.value "Macro")}}
        <div class="flexcol">
            <label>User:</label>

            <select class="power-char" name="system.macro.user">
                {{selectOptions macroUser selected=system.macro.user valueAttr="value" labelAttr="label"}}


            </select>
        </div>
        <div class="flexcol">
            <label>Macro:</label>

            <select class="power-char" name="system.macro.id">
                {{selectOptions psyMacros selected=system.macro.id valueAttr="_id" labelAttr="name"}}

            </select>
        </div>

        {{/if}}

    </div>

    {{#if isGM}}
    <div class="item-description">
        <label>GM Description:</label>
        {{#if editable}}
        <prose-mirror
                      name="system.description.gm"
                      button="true"
                      editable="{{editable}}"
                      toggled="false"
                      value="{{system.description.gm}}">
            {{{enrichedGMDescription}}}
        </prose-mirror>
        {{else}}
        {{{enrichedGMDescription}}}
        {{/if}}
    </div>
    {{/if}}
    <div class="item-description">
        <label>Description:</label>
        {{#if editable}}
        <prose-mirror
                      name="system.description.value"
                      button="true"
                      editable="{{editable}}"
                      toggled="false"
                      value="{{system.description.value}}">
            {{{enrichedDescription}}}
        </prose-mirror>
        {{else}}
        {{{enrichedDescription}}}
        {{/if}}
    </div>
</form>
