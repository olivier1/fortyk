{"_id":"2A3Q1Zty9JBQt6Qm","name":"Apply Run","type":"script","author":"6zwBg86XUSZ7ctUU","img":"systems/fortyk/icons/running.png","scope":"global","command":"for(let target of canvas.tokens.controlled){\n\n   game.fortyk.FortykRolls.applyActiveEffect(target,[game.fortyk.FORTYK.StatusEffects[game.fortyk.FORTYK.StatusEffectsIndex.get(\"running\")]])   \n\n}","folder":null,"sort":0,"permission":{"default":0,"6zwBg86XUSZ7ctUU":3},"flags":{"core":{"sourceId":"Macro.Kuo3FCYYWEnuUDyL"}}}
{"_id":"EC4VKPQ3brUoczrX","name":"Apply Total Defense","type":"script","author":"6zwBg86XUSZ7ctUU","img":"systems/fortyk/icons/defense.png","scope":"global","command":"for(let target of canvas.tokens.controlled){\n\n   game.fortyk.FortykRolls.applyActiveEffect(target,[game.fortyk.FORTYK.StatusEffects[game.fortyk.FORTYK.StatusEffectsIndex.get(\"totalDef\")]])   \n\n}","folder":null,"sort":0,"permission":{"default":0,"6zwBg86XUSZ7ctUU":3},"flags":{"core":{"sourceId":"Macro.Kuo3FCYYWEnuUDyL"}}}
{"name":"Set Elevation","type":"script","author":"6zwBg86XUSZ7ctUU","img":"icons/svg/direction.svg","scope":"global","command":"new Dialog({\n    title: \"Set Elevation\",\n    content: `<div><label>Elevation:</label> <input id=\"elevation\" type=\"text\" name=\"elevation\" value=\"0\" autofocus/></div>`,\n    buttons: {\n        submit: {\n            label: 'OK',\n            callback: async(html) => {\n                let elevation = Number($(html).find('input[name=\"elevation\"]').val());\n\n                for(let token of canvas.tokens.controlled){\n                   \n                   \n\n                    token.document.update({elevation: elevation});\n                }\n\n            }\n        }\n    },\n    default: \"submit\",\n\n\n    width:100}\n          ).render(true);","folder":null,"sort":0,"permission":{"default":0,"6zwBg86XUSZ7ctUU":3},"flags":{"core":{"sourceId":"Macro.JJnBhuEGXw9r5GwZ"}},"_id":"KFoNWCVIIok6wS56"}
{"_id":"aeGM6Y9CaKDGT7sA","name":"Apply Frenzy","type":"script","author":"6zwBg86XUSZ7ctUU","img":"systems/fortyk/icons/frenzy.png","scope":"global","command":"for(let target of canvas.tokens.controlled){\n\n   game.fortyk.FortykRolls.applyActiveEffect(target,[game.fortyk.FORTYK.StatusEffects[game.fortyk.FORTYK.StatusEffectsIndex.get(\"frenzy\")]])   \n\n}","folder":null,"sort":0,"permission":{"default":0,"6zwBg86XUSZ7ctUU":3},"flags":{"core":{"sourceId":"Macro.Kuo3FCYYWEnuUDyL"}}}
{"name":"Mass Tests","type":"script","author":"6zwBg86XUSZ7ctUU","img":"icons/svg/dice-target.svg","scope":"global","command":"new Dialog({\n    title: \"Mass Test\",\n    content: `<div><label>Characteristic:</label><select name=\"characteristic\"><option value=\"agi\">agi</option><option value=\"t\">t</option><option value=\"wp\">wp</option><option value=\"s\">s</option><option value=\"per\">per</option><option value=\"int\">int</option><option value=\"fel\">fel</option><option value=\"ws\">ws</option><option value=\"bs\">bs</option></select></div><div><label>Modifier:</label> <input id=\"modifier\" type=\"text\" name=\"modifier\" value=\"0\" autofocus/></div>`,\n    buttons: {\n        submit: {\n            label: 'OK',\n            callback: async(html) => {\n                let mod = Number($(html).find('input[name=\"modifier\"]').val());\n                let char = $(html).find('select[name=\"characteristic\"]').val();\n\n                for(let token of canvas.tokens.controlled){\n                    let tokenActor=token.actor;\n                    let tokenActorData=token.actor.data;\n                    let data=token.actor.data.data;\n\n                    let testTarget=data.characteristics[char].total+mod;\n                    let test=await game.fortyk.FortykRolls.fortykTest(char, \"Test\", testTarget, tokenActor, char);\n                    let newColor=\"\";\n                    if(test.value){\n                        newColor=\"#00ff00\";\n                    }else{\n                        newColor=\"#ff0000\";\n                    }\n\n                    token.document.update({tint: newColor});\n                }\n\n            }\n        }\n    },\n    default: \"submit\",\n\n\n    width:100}\n          ).render(true);","folder":null,"sort":0,"permission":{"default":0,"6zwBg86XUSZ7ctUU":3},"flags":{"core":{"sourceId":"Macro.jX7GuVs3qQAUPhXO"}},"_id":"oKAXDyNOXG8pzRw5"}
{"name":"Scatter","type":"script","author":"6zwBg86XUSZ7ctUU","img":"icons/svg/target.svg","scope":"global","command":"let chatScatter={user: game.user._id,\n                                 speaker:{actor,alias:game.user.name},\n                                 content:`Scatter! <img class=\"fortyk\" src=\"../systems/fortyk/icons/scatter.png\">`,\n                                 flavor:\"Rolling Scatters!\",\n                                 author:game.user.name};\n                await ChatMessage.create(chatScatter,{});\n                let distanceRoll=new Roll(\"1d5\");\n                await distanceRoll.roll();\n                await distanceRoll.toMessage({\n                    speaker: ChatMessage.getSpeaker({ actor: actor }),\n                    flavor: \"Rolling for scatter distance.\"\n                });\n                let directionRoll=new Roll(\"1d10\");\n                await directionRoll.roll();\n                await directionRoll.toMessage({\n                    speaker: ChatMessage.getSpeaker({ actor: actor }),\n                    flavor: \"Rolling for scatter direction.\"\n                });","folder":null,"sort":0,"permission":{"default":0,"6zwBg86XUSZ7ctUU":3},"flags":{"core":{"sourceId":"Macro.Vlbu2ldsm0AMCxCn"}},"_id":"oYdZY9lvQVyxOWUc"}
{"name":"Remove Tint","type":"script","author":"6zwBg86XUSZ7ctUU","img":"icons/svg/waterfall.svg","scope":"global","command":"for(let token of canvas.tokens.controlled){\n    \n    if(token.data.tint!==\"\"){\n        token.document.update({tint: \"\"});\n    }\n    \n}","folder":null,"sort":0,"permission":{"default":0,"6zwBg86XUSZ7ctUU":3},"flags":{"core":{"sourceId":"Macro.ShqNbaMLIY66U95F"}},"_id":"w5rOn1wgr1BtbJot"}
